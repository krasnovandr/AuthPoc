2018-07-27 14:24:10.267 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-27 14:24:10.312 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-27 14:24:10.318 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-27 14:24:10.322 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-27 14:24:10.325 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-27 14:24:10.642 +03:00 [DBG] Starting token cleanup
2018-07-27 16:25:13.088 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-27 16:25:13.149 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-27 16:25:13.155 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-27 16:25:13.160 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-27 16:25:13.165 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-27 16:25:13.531 +03:00 [DBG] Starting token cleanup
2018-07-27 16:25:15.087 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:25:15.131 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:25:38.823 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:25:38.827 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:25:38.835 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 16:25:38.864 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 16:25:38.867 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 16:25:38.872 +03:00 [DBG] Start discovery request
2018-07-27 16:25:39.955 +03:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2018-07-27 16:26:35.222 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 16:26:35.227 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 16:26:35.230 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 16:26:35.236 +03:00 [DBG] Start discovery request
2018-07-27 16:26:35.273 +03:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2018-07-27 16:26:35.496 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 16:26:35.501 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 16:26:35.503 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 16:26:35.511 +03:00 [DBG] Start key discovery request
2018-07-27 16:26:35.642 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:26:35.662 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:26:35.670 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 16:26:35.681 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 16:26:35.684 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 16:26:35.693 +03:00 [DBG] Start authorize request
2018-07-27 16:26:35.706 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:26:35.716 +03:00 [DBG] No user present in authorize request
2018-07-27 16:26:35.724 +03:00 [DBG] Start authorize request protocol validation
2018-07-27 16:26:36.156 +03:00 [DBG] mvc found in database: true
2018-07-27 16:26:36.166 +03:00 [DBG] Checking for PKCE parameters
2018-07-27 16:26:36.169 +03:00 [DBG] No PKCE used.
2018-07-27 16:26:36.218 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:26:36.350 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:26:36.371 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:26:36.387 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:26:36.400 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 16:26:36.417 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc",
  "ClientName": "MVC Client",
  "RedirectUri": "http://localhost:5002/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5002/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile api1 offline_access",
  "State": "CfDJ8KuqC1l7QeZCrHnUtlrKrzJg9__Q7J8_dd-PnAI1gvom4WqGGx-pzEXbEb3RD7-TICs3iWf_4oJO4RhGdO6JCSsl3j84xvko2zs53LUt8s7_McpJJSui5UF0FOUHlmYGtbI8aVudDuJdJMJ5oGIdQp0I0eeKL_cs3_69xM6OAn_OX4icuvjX8HkujQXPY3cHTgIx5b8p7vFyI2FirwvVMtyjZuvTTKE3VNpi5pF1pv32JlXb0C_wamlLPjE0H4QaXE21M945Q5RAEq7dCADIva1v1G-Isegg9eiN_JMJxf6Z2OTD58bOar7NfjoM4qJAt9U8XShOUUn_nGcoLC3AKYQ",
  "Nonce": "636682947955907681.NjUzYWRjN2YtNmJkZi00MzczLWE5ODAtZTM2MzI4MWU5NzExM2RlNzVhN2UtNjgyZS00NDNjLWFjNTQtZGQ1MDU5N2FiYTE3",
  "Raw": {
    "client_id": "mvc",
    "redirect_uri": "http://localhost:5002/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile api1 offline_access",
    "response_mode": "form_post",
    "nonce": "636682947955907681.NjUzYWRjN2YtNmJkZi00MzczLWE5ODAtZTM2MzI4MWU5NzExM2RlNzVhN2UtNjgyZS00NDNjLWFjNTQtZGQ1MDU5N2FiYTE3",
    "state": "CfDJ8KuqC1l7QeZCrHnUtlrKrzJg9__Q7J8_dd-PnAI1gvom4WqGGx-pzEXbEb3RD7-TICs3iWf_4oJO4RhGdO6JCSsl3j84xvko2zs53LUt8s7_McpJJSui5UF0FOUHlmYGtbI8aVudDuJdJMJ5oGIdQp0I0eeKL_cs3_69xM6OAn_OX4icuvjX8HkujQXPY3cHTgIx5b8p7vFyI2FirwvVMtyjZuvTTKE3VNpi5pF1pv32JlXb0C_wamlLPjE0H4QaXE21M945Q5RAEq7dCADIva1v1G-Isegg9eiN_JMJxf6Z2OTD58bOar7NfjoM4qJAt9U8XShOUUn_nGcoLC3AKYQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-07-27 16:26:36.434 +03:00 [INF] Showing login: User is not authenticated
2018-07-27 16:26:36.457 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:26:36.464 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:26:36.553 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:26:36.557 +03:00 [DBG] Start authorize request protocol validation
2018-07-27 16:26:36.583 +03:00 [DBG] mvc found in database: true
2018-07-27 16:26:36.586 +03:00 [DBG] Checking for PKCE parameters
2018-07-27 16:26:36.588 +03:00 [DBG] No PKCE used.
2018-07-27 16:26:36.595 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:26:36.613 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:26:36.620 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:26:36.636 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:26:36.641 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 16:26:36.671 +03:00 [DBG] mvc found in database: true
2018-07-27 16:27:26.639 +03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 16:27:26.648 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:27:26.652 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:27:30.217 +03:00 [DBG] Augmenting SignInContext
2018-07-27 16:27:30.221 +03:00 [DBG] Adding idp claim with value: local
2018-07-27 16:27:30.224 +03:00 [DBG] Adding amr claim with value: pwd
2018-07-27 16:27:30.229 +03:00 [DBG] Adding auth_time claim with value: 1532698050
2018-07-27 16:27:30.233 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:27:30.247 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 16:27:30.312 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "906123a3-4bab-49ae-a2c3-c0617fb03398",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJOHHB3L5E:00000005",
  "TimeStamp": "2018-07-27T13:27:30Z",
  "ProcessId": 37968,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-07-27 16:27:30.337 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:27:30.343 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:27:30.347 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 16:27:30.352 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 16:27:30.355 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 16:27:30.371 +03:00 [DBG] Start authorize callback request
2018-07-27 16:27:30.384 +03:00 [DBG] User in authorize request: 906123a3-4bab-49ae-a2c3-c0617fb03398
2018-07-27 16:27:30.387 +03:00 [DBG] Start authorize request protocol validation
2018-07-27 16:27:30.447 +03:00 [DBG] mvc found in database: true
2018-07-27 16:27:30.449 +03:00 [DBG] Checking for PKCE parameters
2018-07-27 16:27:30.452 +03:00 [DBG] No PKCE used.
2018-07-27 16:27:30.464 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:30.543 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:27:30.557 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:30.651 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:27:30.657 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 16:27:30.660 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc",
  "ClientName": "MVC Client",
  "RedirectUri": "http://localhost:5002/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5002/signin-oidc"
  ],
  "SubjectId": "906123a3-4bab-49ae-a2c3-c0617fb03398",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile api1 offline_access",
  "State": "CfDJ8KuqC1l7QeZCrHnUtlrKrzJg9__Q7J8_dd-PnAI1gvom4WqGGx-pzEXbEb3RD7-TICs3iWf_4oJO4RhGdO6JCSsl3j84xvko2zs53LUt8s7_McpJJSui5UF0FOUHlmYGtbI8aVudDuJdJMJ5oGIdQp0I0eeKL_cs3_69xM6OAn_OX4icuvjX8HkujQXPY3cHTgIx5b8p7vFyI2FirwvVMtyjZuvTTKE3VNpi5pF1pv32JlXb0C_wamlLPjE0H4QaXE21M945Q5RAEq7dCADIva1v1G-Isegg9eiN_JMJxf6Z2OTD58bOar7NfjoM4qJAt9U8XShOUUn_nGcoLC3AKYQ",
  "Nonce": "636682947955907681.NjUzYWRjN2YtNmJkZi00MzczLWE5ODAtZTM2MzI4MWU5NzExM2RlNzVhN2UtNjgyZS00NDNjLWFjNTQtZGQ1MDU5N2FiYTE3",
  "SessionId": "ae318ad7ec95807cc0e9a5f3408b08ad",
  "Raw": {
    "client_id": "mvc",
    "redirect_uri": "http://localhost:5002/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile api1 offline_access",
    "response_mode": "form_post",
    "nonce": "636682947955907681.NjUzYWRjN2YtNmJkZi00MzczLWE5ODAtZTM2MzI4MWU5NzExM2RlNzVhN2UtNjgyZS00NDNjLWFjNTQtZGQ1MDU5N2FiYTE3",
    "state": "CfDJ8KuqC1l7QeZCrHnUtlrKrzJg9__Q7J8_dd-PnAI1gvom4WqGGx-pzEXbEb3RD7-TICs3iWf_4oJO4RhGdO6JCSsl3j84xvko2zs53LUt8s7_McpJJSui5UF0FOUHlmYGtbI8aVudDuJdJMJ5oGIdQp0I0eeKL_cs3_69xM6OAn_OX4icuvjX8HkujQXPY3cHTgIx5b8p7vFyI2FirwvVMtyjZuvTTKE3VNpi5pF1pv32JlXb0C_wamlLPjE0H4QaXE21M945Q5RAEq7dCADIva1v1G-Isegg9eiN_JMJxf6Z2OTD58bOar7NfjoM4qJAt9U8XShOUUn_nGcoLC3AKYQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-07-27 16:27:30.704 +03:00 [DBG] Scopes contains offline_access, consent is required
2018-07-27 16:27:30.707 +03:00 [INF] Showing consent: User has not yet consented
2018-07-27 16:27:30.734 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:27:30.763 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:27:30.800 +03:00 [DBG] Start authorize request protocol validation
2018-07-27 16:27:30.865 +03:00 [DBG] mvc found in database: true
2018-07-27 16:27:30.870 +03:00 [DBG] Checking for PKCE parameters
2018-07-27 16:27:30.873 +03:00 [DBG] No PKCE used.
2018-07-27 16:27:30.887 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:31.000 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:27:31.065 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:31.167 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:27:31.172 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 16:27:31.245 +03:00 [DBG] mvc found in database: true
2018-07-27 16:27:31.258 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:31.345 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:27:41.038 +03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 16:27:41.053 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:27:41.056 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:27:41.114 +03:00 [DBG] Start authorize request protocol validation
2018-07-27 16:27:41.171 +03:00 [DBG] mvc found in database: true
2018-07-27 16:27:41.174 +03:00 [DBG] Checking for PKCE parameters
2018-07-27 16:27:41.177 +03:00 [DBG] No PKCE used.
2018-07-27 16:27:41.191 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:41.265 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:27:41.274 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:41.291 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:27:41.293 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 16:27:41.326 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:27:41.332 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:27:41.336 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 16:27:41.341 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 16:27:41.343 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 16:27:41.353 +03:00 [DBG] Start authorize callback request
2018-07-27 16:27:41.393 +03:00 [DBG] User in authorize request: 906123a3-4bab-49ae-a2c3-c0617fb03398
2018-07-27 16:27:41.401 +03:00 [DBG] Start authorize request protocol validation
2018-07-27 16:27:41.432 +03:00 [DBG] mvc found in database: true
2018-07-27 16:27:41.434 +03:00 [DBG] Checking for PKCE parameters
2018-07-27 16:27:41.436 +03:00 [DBG] No PKCE used.
2018-07-27 16:27:41.446 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:41.464 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:27:41.473 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:41.496 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:27:41.503 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 16:27:41.508 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc",
  "ClientName": "MVC Client",
  "RedirectUri": "http://localhost:5002/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5002/signin-oidc"
  ],
  "SubjectId": "906123a3-4bab-49ae-a2c3-c0617fb03398",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile api1 offline_access",
  "State": "CfDJ8KuqC1l7QeZCrHnUtlrKrzJg9__Q7J8_dd-PnAI1gvom4WqGGx-pzEXbEb3RD7-TICs3iWf_4oJO4RhGdO6JCSsl3j84xvko2zs53LUt8s7_McpJJSui5UF0FOUHlmYGtbI8aVudDuJdJMJ5oGIdQp0I0eeKL_cs3_69xM6OAn_OX4icuvjX8HkujQXPY3cHTgIx5b8p7vFyI2FirwvVMtyjZuvTTKE3VNpi5pF1pv32JlXb0C_wamlLPjE0H4QaXE21M945Q5RAEq7dCADIva1v1G-Isegg9eiN_JMJxf6Z2OTD58bOar7NfjoM4qJAt9U8XShOUUn_nGcoLC3AKYQ",
  "Nonce": "636682947955907681.NjUzYWRjN2YtNmJkZi00MzczLWE5ODAtZTM2MzI4MWU5NzExM2RlNzVhN2UtNjgyZS00NDNjLWFjNTQtZGQ1MDU5N2FiYTE3",
  "SessionId": "ae318ad7ec95807cc0e9a5f3408b08ad",
  "Raw": {
    "client_id": "mvc",
    "redirect_uri": "http://localhost:5002/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile api1 offline_access",
    "response_mode": "form_post",
    "nonce": "636682947955907681.NjUzYWRjN2YtNmJkZi00MzczLWE5ODAtZTM2MzI4MWU5NzExM2RlNzVhN2UtNjgyZS00NDNjLWFjNTQtZGQ1MDU5N2FiYTE3",
    "state": "CfDJ8KuqC1l7QeZCrHnUtlrKrzJg9__Q7J8_dd-PnAI1gvom4WqGGx-pzEXbEb3RD7-TICs3iWf_4oJO4RhGdO6JCSsl3j84xvko2zs53LUt8s7_McpJJSui5UF0FOUHlmYGtbI8aVudDuJdJMJ5oGIdQp0I0eeKL_cs3_69xM6OAn_OX4icuvjX8HkujQXPY3cHTgIx5b8p7vFyI2FirwvVMtyjZuvTTKE3VNpi5pF1pv32JlXb0C_wamlLPjE0H4QaXE21M945Q5RAEq7dCADIva1v1G-Isegg9eiN_JMJxf6Z2OTD58bOar7NfjoM4qJAt9U8XShOUUn_nGcoLC3AKYQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-07-27 16:27:41.531 +03:00 [DBG] Scopes contains offline_access, consent is required
2018-07-27 16:27:41.540 +03:00 [INF] User consented to scopes: ["openid","profile","api1","offline_access"]
2018-07-27 16:27:41.544 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","api1","offline_access"]
2018-07-27 16:27:41.552 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 906123a3-4bab-49ae-a2c3-c0617fb03398
2018-07-27 16:27:41.595 +03:00 [DBG] BVr/wCR88mcAGKjUQ2Y7vAVVgMPNxP8zr6xg2B1d4Us= found in database
2018-07-27 16:27:41.655 +03:00 [DBG] Creating Hybrid Flow response.
2018-07-27 16:27:41.684 +03:00 [DBG] FGrFJTf5fZ3XdIe0zlWN0zl+ndpGXHwySyRJsMhQwK8= not found in database
2018-07-27 16:27:41.706 +03:00 [DBG] Creating Implicit Flow response.
2018-07-27 16:27:41.723 +03:00 [DBG] Getting claims for identity token for subject: 906123a3-4bab-49ae-a2c3-c0617fb03398 and client: mvc
2018-07-27 16:27:41.732 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 16:27:41.829 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc",
  "ClientName": "MVC Client",
  "RedirectUri": "http://localhost:5002/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "906123a3-4bab-49ae-a2c3-c0617fb03398",
  "Scopes": "openid profile api1 offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****KbYg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****ad41"
    }
  ],
  "ActivityId": "0HLFJOHHB3L5E:0000000A",
  "TimeStamp": "2018-07-27T13:27:41Z",
  "ProcessId": 37968,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-07-27 16:27:41.839 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "906123a3-4bab-49ae-a2c3-c0617fb03398",
  "ClientId": "mvc",
  "RedirectUri": "http://localhost:5002/signin-oidc",
  "State": "CfDJ8KuqC1l7QeZCrHnUtlrKrzJg9__Q7J8_dd-PnAI1gvom4WqGGx-pzEXbEb3RD7-TICs3iWf_4oJO4RhGdO6JCSsl3j84xvko2zs53LUt8s7_McpJJSui5UF0FOUHlmYGtbI8aVudDuJdJMJ5oGIdQp0I0eeKL_cs3_69xM6OAn_OX4icuvjX8HkujQXPY3cHTgIx5b8p7vFyI2FirwvVMtyjZuvTTKE3VNpi5pF1pv32JlXb0C_wamlLPjE0H4QaXE21M945Q5RAEq7dCADIva1v1G-Isegg9eiN_JMJxf6Z2OTD58bOar7NfjoM4qJAt9U8XShOUUn_nGcoLC3AKYQ",
  "Scope": "openid profile api1 offline_access"
}
2018-07-27 16:27:41.868 +03:00 [DBG] Augmenting SignInContext
2018-07-27 16:27:41.870 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 16:27:42.112 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 16:27:42.123 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 16:27:42.127 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 16:27:42.141 +03:00 [DBG] Start token request.
2018-07-27 16:27:42.165 +03:00 [DBG] Start client validation
2018-07-27 16:27:42.172 +03:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 16:27:42.182 +03:00 [DBG] Start parsing for secret in post body
2018-07-27 16:27:42.184 +03:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 16:27:42.188 +03:00 [DBG] Secret id found: mvc
2018-07-27 16:27:42.218 +03:00 [DBG] mvc found in database: true
2018-07-27 16:27:42.230 +03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 16:27:42.232 +03:00 [DBG] Client validation success
2018-07-27 16:27:42.239 +03:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "mvc",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJOHHB3L5N:00000001",
  "TimeStamp": "2018-07-27T13:27:42Z",
  "ProcessId": 37968,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-07-27 16:27:42.249 +03:00 [DBG] Start token request validation
2018-07-27 16:27:42.260 +03:00 [DBG] Start validation of authorization code token request
2018-07-27 16:27:42.288 +03:00 [DBG] FGrFJTf5fZ3XdIe0zlWN0zl+ndpGXHwySyRJsMhQwK8= found in database: true
2018-07-27 16:27:42.324 +03:00 [DBG] removing FGrFJTf5fZ3XdIe0zlWN0zl+ndpGXHwySyRJsMhQwK8= persisted grant from database
2018-07-27 16:27:42.342 +03:00 [DBG] Validation of authorization code token request success
2018-07-27 16:27:42.352 +03:00 [INF] Token request validation success
{
  "ClientId": "mvc",
  "ClientName": "MVC Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "e18df89042da74f604acef0b259a229dd27daf18115c66d0a4ca36e25cb3ad41",
  "Raw": {
    "client_id": "mvc",
    "client_secret": "***REDACTED***",
    "code": "e18df89042da74f604acef0b259a229dd27daf18115c66d0a4ca36e25cb3ad41",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5002/signin-oidc"
  }
}
2018-07-27 16:27:42.395 +03:00 [DBG] mvc found in database: true
2018-07-27 16:27:42.408 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:42.490 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:27:42.505 +03:00 [DBG] Getting claims for access token for client: mvc
2018-07-27 16:27:42.507 +03:00 [DBG] Getting claims for access token for subject: 906123a3-4bab-49ae-a2c3-c0617fb03398
2018-07-27 16:27:42.535 +03:00 [DBG] Creating refresh token
2018-07-27 16:27:42.537 +03:00 [DBG] Setting an absolute lifetime: 2592000
2018-07-27 16:27:42.560 +03:00 [DBG] rYf9Jmf6/fXek1b0XJTqhqsZAiSOehaW5lqb8dvTVDQ= not found in database
2018-07-27 16:27:42.593 +03:00 [DBG] mvc found in database: true
2018-07-27 16:27:42.605 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:42.622 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:27:42.625 +03:00 [DBG] Getting claims for identity token for subject: 906123a3-4bab-49ae-a2c3-c0617fb03398 and client: mvc
2018-07-27 16:27:42.628 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 16:27:42.637 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc",
  "ClientName": "MVC Client",
  "Endpoint": "Token",
  "Scopes": "openid profile api1 offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****bpmA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****dd49"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****MwdA"
    }
  ],
  "ActivityId": "0HLFJOHHB3L5N:00000001",
  "TimeStamp": "2018-07-27T13:27:42Z",
  "ProcessId": 37968,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-07-27 16:27:42.643 +03:00 [DBG] Token request success.
2018-07-27 16:27:42.669 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 16:27:42.674 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 16:27:42.676 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 16:27:42.687 +03:00 [DBG] Start userinfo request
2018-07-27 16:27:42.693 +03:00 [DBG] Bearer token found in header
2018-07-27 16:27:42.779 +03:00 [DBG] mvc found in database: true
2018-07-27 16:27:42.820 +03:00 [DBG] mvc found in database: true
2018-07-27 16:27:42.838 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 16:27:42.851 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532698062,
    "exp": 1532701662,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "api1"
    ],
    "client_id": "mvc",
    "sub": "906123a3-4bab-49ae-a2c3-c0617fb03398",
    "auth_time": 1532698050,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "api1",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2018-07-27 16:27:42.864 +03:00 [DBG] Creating userinfo response
2018-07-27 16:27:42.871 +03:00 [DBG] Scopes in access token: openid profile api1 offline_access
2018-07-27 16:27:42.877 +03:00 [DBG] Scopes in access token: openid profile api1 offline_access
2018-07-27 16:27:42.890 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:42.894 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-07-27 16:27:42.897 +03:00 [DBG] Scopes in access token: openid profile api1 offline_access
2018-07-27 16:27:42.905 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:27:42.917 +03:00 [INF] Profile service returned to the following claim types: sub name given_name family_name website preferred_username
2018-07-27 16:27:42.920 +03:00 [DBG] End userinfo request
2018-07-27 16:34:20.138 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-27 16:34:20.204 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-27 16:34:20.207 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-27 16:34:20.210 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-27 16:34:20.218 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-27 16:34:20.618 +03:00 [DBG] Starting token cleanup
2018-07-27 16:34:22.138 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:34:22.162 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:34:32.942 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 16:34:32.950 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 16:34:32.952 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 16:34:32.957 +03:00 [DBG] Start discovery request
2018-07-27 16:34:34.024 +03:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2018-07-27 16:34:34.351 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 16:34:34.353 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 16:34:34.355 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 16:34:34.361 +03:00 [DBG] Start key discovery request
2018-07-27 16:34:34.479 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:34:34.496 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:34:34.504 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-07-27 16:34:34.510 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-07-27 16:34:34.514 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-07-27 16:34:34.530 +03:00 [DBG] Processing signout request for 906123a3-4bab-49ae-a2c3-c0617fb03398
2018-07-27 16:34:34.541 +03:00 [DBG] Start end session request validation
2018-07-27 16:34:34.550 +03:00 [DBG] Start identity token validation
2018-07-27 16:34:34.960 +03:00 [DBG] mvc found in database: true
2018-07-27 16:34:34.964 +03:00 [DBG] Client found: mvc / MVC Client
2018-07-27 16:34:35.129 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 16:34:35.142 +03:00 [DBG] Token validation success
{
  "ClientId": "mvc",
  "ClientName": "MVC Client",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1532698062,
    "exp": 1532698362,
    "iss": "http://localhost:5000",
    "aud": "mvc",
    "nonce": "636682947955907681.NjUzYWRjN2YtNmJkZi00MzczLWE5ODAtZTM2MzI4MWU5NzExM2RlNzVhN2UtNjgyZS00NDNjLWFjNTQtZGQ1MDU5N2FiYTE3",
    "iat": 1532698062,
    "at_hash": "M5D2BHuytEzV6lbMqMMPUg",
    "sid": "ae318ad7ec95807cc0e9a5f3408b08ad",
    "sub": "906123a3-4bab-49ae-a2c3-c0617fb03398",
    "auth_time": 1532698050,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-07-27 16:34:35.165 +03:00 [INF] End session request validation success
{
  "ClientId": "mvc",
  "ClientName": "MVC Client",
  "SubjectId": "906123a3-4bab-49ae-a2c3-c0617fb03398",
  "PostLogOutUri": "http://localhost:5002/signout-callback-oidc",
  "State": "CfDJ8KuqC1l7QeZCrHnUtlrKrzIAqeov1oZlF6yUInwzZ971IADbprsOBRuw3TsqOQAuyMk09t0DnQVJyqZmnl9bg6eSQ6qhhaq59-pHSPuVa8BkCfFC60e2E9ylHi3_6Ultw5XLwjNkmHXxQ9E4dKCtz_3y_A9_qnvLKZstGg8eSwMQ",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5002/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImY2NzZhNjNmM2QxZmRmYTNmMzgyZGNmZDNkYjNkZjc3IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzI2OTgwNjIsImV4cCI6MTUzMjY5ODM2MiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoibXZjIiwibm9uY2UiOiI2MzY2ODI5NDc5NTU5MDc2ODEuTmpVellXUmpOMll0Tm1Ka1ppMDBNemN6TFdFNU9EQXRaVE0yTXpJNE1XVTVOekV4TTJSbE56VmhOMlV0TmpneVpTMDBORE5qTFdGak5UUXRaR1ExTURVNU4yRmlZVEUzIiwiaWF0IjoxNTMyNjk4MDYyLCJhdF9oYXNoIjoiTTVEMkJIdXl0RXpWNmxiTXFNTVBVZyIsInNpZCI6ImFlMzE4YWQ3ZWM5NTgwN2NjMGU5YTVmMzQwOGIwOGFkIiwic3ViIjoiOTA2MTIzYTMtNGJhYi00OWFlLWEyYzMtYzA2MTdmYjAzMzk4IiwiYXV0aF90aW1lIjoxNTMyNjk4MDUwLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.RMOhTC7EnBRvlCM9aYz1lMf09dB015bwwYnas1ezdHdMCgpIPryizda1gXUwF1iBUW9AKRKNHkdz6QhTNgQK7HA0V0cM93UzOez2VgcHH-Iq-Zm-KYMcaPkRItJIF1LUjS23roDI7I276fcmwEA4w-O0hxMLtiyuTPk60UxrQNpo63ltBD6MiH1o5K-acq-LLShuT3JzVpOb6A1Ozxm70BTsiHE3kz_2MtOcXPtT5f-3baGklgj8qL0pc2GsWK9ET9_Smi8q_Bfipi4JpotCMEXKhzIvCWv7hxTO4Im9VH6XEQsSLhpT4zR7yK7CyFnMiETLnKAp8AQODrbNZ7bpmA",
    "state": "CfDJ8KuqC1l7QeZCrHnUtlrKrzIAqeov1oZlF6yUInwzZ971IADbprsOBRuw3TsqOQAuyMk09t0DnQVJyqZmnl9bg6eSQ6qhhaq59-pHSPuVa8BkCfFC60e2E9ylHi3_6Ultw5XLwjNkmHXxQ9E4dKCtz_3y_A9_qnvLKZstGg8eSwMQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-07-27 16:34:35.174 +03:00 [DBG] Success validating end session request from mvc
2018-07-27 16:34:35.210 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:34:35.219 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 16:34:35.351 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-07-27 16:34:35.357 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-07-27 16:34:35.359 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-07-27 16:34:35.405 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "906123a3-4bab-49ae-a2c3-c0617fb03398",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLFJOMKBG95I:00000003",
  "TimeStamp": "2018-07-27T13:34:35Z",
  "ProcessId": 19612,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-07-27 16:34:35.620 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-07-27 16:34:35.629 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-07-27 16:34:35.636 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-07-27 16:34:35.648 +03:00 [DBG] Processing signout callback request
2018-07-27 16:34:35.701 +03:00 [DBG] mvc found in database: true
2018-07-27 16:34:35.703 +03:00 [DBG] No client front-channel logout URLs
2018-07-27 16:34:35.706 +03:00 [DBG] No client back-channel logout URLs
2018-07-27 16:34:35.708 +03:00 [INF] Successful signout callback.
2018-07-27 16:34:35.709 +03:00 [DBG] No client front-channel iframe urls
2018-07-27 16:34:35.713 +03:00 [DBG] No client back-channel iframe urls
2018-07-27 16:34:46.262 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 16:34:46.275 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 16:34:46.280 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 16:34:46.291 +03:00 [DBG] Start authorize request
2018-07-27 16:34:46.302 +03:00 [DBG] No user present in authorize request
2018-07-27 16:34:46.312 +03:00 [DBG] Start authorize request protocol validation
2018-07-27 16:34:46.366 +03:00 [DBG] mvc found in database: true
2018-07-27 16:34:46.374 +03:00 [DBG] Checking for PKCE parameters
2018-07-27 16:34:46.378 +03:00 [DBG] No PKCE used.
2018-07-27 16:34:46.423 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:34:46.558 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:34:46.746 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:34:46.776 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:34:46.810 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 16:34:46.840 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc",
  "ClientName": "MVC Client",
  "RedirectUri": "http://localhost:5002/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5002/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile api1 offline_access",
  "State": "CfDJ8KuqC1l7QeZCrHnUtlrKrzKGvSosDmQ5r_EkqaVppMiQEnfKlvyGI2XkrkMxyZfGL8yhux1ONpdMkygHwZsRJVDr3hgMx-lV4J44CiKRE57H6y8EbHRluDtNA8gLwPOq8jEo7IQ8-CQOmrbB-P1AARrLGWe3bwJEPjv232XcOAyVp5wgWadLaTL2ErTM5cpiB5S1dR8yB1Fx8N-Yx9EA1HU4q47ctin3R_spEa6VmT361G_QKAE2Ja0qn0NYY9wzozop8ZQVqgHBlzKVAVX5a7oSM11_LxGKnLZfudSCEAgS1CM7b3leTRuGXEiUrt3O5L_L4dU39_7Et8MJkzWqWow",
  "Nonce": "636682952862321614.YmZiNmM5NGMtMjM3MC00YTk1LWFjYzEtZDZhNzdjNWUxYmQ4MzM0Yjc4YTUtNTNmNC00M2FkLTgzOGYtZjYzYWM1YzhjYzdl",
  "Raw": {
    "client_id": "mvc",
    "redirect_uri": "http://localhost:5002/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile api1 offline_access",
    "response_mode": "form_post",
    "nonce": "636682952862321614.YmZiNmM5NGMtMjM3MC00YTk1LWFjYzEtZDZhNzdjNWUxYmQ4MzM0Yjc4YTUtNTNmNC00M2FkLTgzOGYtZjYzYWM1YzhjYzdl",
    "state": "CfDJ8KuqC1l7QeZCrHnUtlrKrzKGvSosDmQ5r_EkqaVppMiQEnfKlvyGI2XkrkMxyZfGL8yhux1ONpdMkygHwZsRJVDr3hgMx-lV4J44CiKRE57H6y8EbHRluDtNA8gLwPOq8jEo7IQ8-CQOmrbB-P1AARrLGWe3bwJEPjv232XcOAyVp5wgWadLaTL2ErTM5cpiB5S1dR8yB1Fx8N-Yx9EA1HU4q47ctin3R_spEa6VmT361G_QKAE2Ja0qn0NYY9wzozop8ZQVqgHBlzKVAVX5a7oSM11_LxGKnLZfudSCEAgS1CM7b3leTRuGXEiUrt3O5L_L4dU39_7Et8MJkzWqWow",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-07-27 16:34:46.860 +03:00 [INF] Showing login: User is not authenticated
2018-07-27 16:34:46.923 +03:00 [DBG] Start authorize request protocol validation
2018-07-27 16:34:46.949 +03:00 [DBG] mvc found in database: true
2018-07-27 16:34:46.954 +03:00 [DBG] Checking for PKCE parameters
2018-07-27 16:34:46.956 +03:00 [DBG] No PKCE used.
2018-07-27 16:34:46.965 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:34:46.980 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:34:46.989 +03:00 [DBG] Found ["openid","profile"] identity scopes in database
2018-07-27 16:34:47.004 +03:00 [DBG] Found ["api1"] API scopes in database
2018-07-27 16:34:47.008 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 16:34:47.035 +03:00 [DBG] mvc found in database: true
2018-07-27 16:34:52.155 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-07-27 16:49:16.484 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-27 16:49:16.572 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-27 16:49:16.609 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-27 16:49:16.658 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-27 16:49:16.711 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-27 16:49:17.366 +03:00 [DBG] Starting token cleanup
2018-07-27 16:49:19.284 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-07-27 16:49:19.344 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
